<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <title>TypeScript Boilerplate</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="static/styles.css">
    <script>
        // Configure Tailwind to use the Outfit font family
        document.addEventListener('DOMContentLoaded', function() {
            const style = document.createElement('style');
            style.innerHTML = `
                body {
                    font-family: 'Outfit', sans-serif;
                }
            `;
            document.head.appendChild(style);
        });
        </script>
</head>
<body class="bg-black" style="overflow: hidden;">
    <header class="w-full flex items-center justify-between p-0" style="background-color: #cc781e35; height: 32px;">
        <div class="flex items-center gap-3" style="cursor: pointer;">
            <input id="wavefileInput" type="file" accept="audio/*" class="text-white text-sm px-2 py-1 rounded" style="color: #cc781eff; background-color: #cc781e00; display: none; cursor: pointer;">
            <label for="wavefileInput" class="text-white text-sm px-4 py-[6px] active:bg-[#00000030] hover:bg-[#cc781e10] active:py-[7px]" style="height: 32px; color: #cc781eff; display: block; user-select: none; cursor: pointer;">Open...</label>
            <button id="saveAsBtn" title="Save as..." aria-label="Save as" class="text-sm px-4 py-[6px] active:bg-[#00000030] hover:bg-[#cc781e10] active:py-[7px]" style="height:32px; color: #cc781eff; display:block; user-select:none; cursor:pointer; border:none;" onclick="window.audioFile.downloadWav();">
                Save as...
            </button>
            <button id="saveViewAsBtn" title="Save as..." aria-label="Save as" class="text-sm px-4 py-[6px] active:bg-[#00000030] hover:bg-[#cc781e10] active:py-[7px]" style="height:32px; color: #cc781eff; display:block; user-select:none; cursor:pointer; border:none;" onclick="window.audioFile.downloadWav(window.audioFile.view.start, window.audioFile.view.end);">
                Save current view as...
            </button>
        </div>
        <div class="flex-1 flex items-center justify-center" style="position: absolute; top: 0; margin: 0 auto; width: calc(100% - 200px); left: 0; right: 0; z-index: -99;">
            <div style="text-align:center; pointer-events:none;">
                <span id="fileTitle" class="text-sm px-4 py-[6px]" style="color:#cc781ecc; user-select:none; display:block; max-width:60vw; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">
                    No file loaded
                </span>
            </div>
        </div>
        <div class="flex items-center gap-4">
            <label for="timeDisplaySelect" class="text-sm text-gray-300" style="color: #cc781ecc; user-select: none;">Time display:</label>
            <select id="timeDisplaySelect" class="text-white text-sm px-2 py-1 rounded" style="color: #cc781eff; background-color: #cc781e00; text-decoration: underline; user-select: none; cursor: pointer;">
                <option value="seconds">Seconds</option>
                <option value="samples">Samples</option>
            </select>
        </div>
    </header>
    <section>
            <!-- Measurement entries will be dynamically added here -->
            <div class="mx-auto" style="width:100%; background-color: #cc781e22; height: calc(100vh - 64px); position: absolute; top: 32px;" id="container">
                <div style="position:absolute; top:0; right:0; width:52px; height:32px; display:flex; align-items:center; justify-content:center; z-index:50;" class=" active:py-[7px]">
                    <button id="resetZoomBtn" title="Reset zoom" aria-label="Reset zoom" alt="Reset zoom"
                                    class="text-white hover:bg-[#cc781e10] active:bg-[#00000030] active:py-[7px]"
                                    style="width:52px; height:32px; border:none; color:#cc781eff; cursor:pointer; display:block;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" style="margin: auto;" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                            <path d="M8 3H5a2 2 0 0 0-2 2v3" stroke="#cc781eff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                            <path d="M16 21h3a2 2 0 0 0 2-2v-3" stroke="#cc781eff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                            <path d="M21 8V5a2 2 0 0 0-2-2h-3" stroke="#cc781eff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                            <path d="M3 16v3a2 2 0 0 0 2 2h3" stroke="#cc781eff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" fill="none"/>

                            <!-- Larger inner arrows pointing outwards -->
                            <!-- Up arrow -->
                            <polygon points="12,4 9,8 15,8" fill="#cc781eff"/>
                            <!-- Right arrow -->
                            <polygon points="20,12 16,9 16,15" fill="#cc781eff"/>
                            <!-- Down arrow -->
                            <polygon points="12,20 9,16 15,16" fill="#cc781eff"/>
                            <!-- Left arrow -->
                            <polygon points="4,12 8,9 8,15" fill="#cc781eff"/>
                        </svg>
                    </button>
                </div>
                <div id="waveformLoading" style="width:calc(100vw - 52px);height:calc(100vh - 48px);left:0;display:flex;align-items:center;justify-content:center;flex-direction:column;color:#ccc; position:absolute; top: 32px; background-color: #00000088;">
                    <svg width="80" height="40" viewBox="0 0 24 12" fill="#cc781e" id="loadingAnimation"><rect x="0" y="4" width="3" height="4"><animate attributeName="height" values="4;10;4" dur="0.8s" repeatCount="indefinite"/></rect><rect x="6" y="4" width="3" height="4"><animate attributeName="height" values="6;12;6" dur="0.8s" begin="0.2s" repeatCount="indefinite"/></rect><rect x="12" y="4" width="3" height="4"><animate attributeName="height" values="4;10;4" dur="0.8s" begin="0.4s" repeatCount="indefinite"/></rect><rect x="18" y="4" width="3" height="4"><animate attributeName="height" values="6;12;6" dur="0.8s" begin="0.6s" repeatCount="indefinite"/></rect></svg>
                    <small style="margin-top:8px;color:#cc781eff;text-transform:uppercase" id="loadingText">Loading waveform</small>
                </div>
                                
                <div id="spectrogramCanvas1YAxis" class="absolute" style="right: 0; top: calc(50vh - 12px); width: 52px; height: calc(50vh - 52px);"></div>
                <canvas id="spectrogramCanvas1" style="width: calc(100% - 48px); height: calc(50vh - 52px); top: calc(50vh - 12px); left: 0;" class="absolute" xmlns="http://www.w3.org/2000/svg" class="block bg-black">        </canvas>
                <div id="waveformXAxis" class="absolute" style="width: calc(100vw - 52px); height: 32px; top: 0;"></div>
                <div id="waveformYAxis" class="absolute" style="right: 0; top: 32px; width: 52px; height: calc(50vh - 56px);"></div>
                <svg id="waveformSVG" style="cursor: text; width: calc(100% - 52px); height: calc(50vh - 56px); position:absolute; top: 32px;" xmlns="http://www.w3.org/2000/svg" class="block bg-black"></svg>

            </div>
            <div id="statusBar" style="width: 100vw; height: 32px; position: absolute; bottom: 0; left: 0; background-color: #cc781e35; display: flex; align-items: center; justify-content:space-between; gap: 16px;">
                <span id="fftSizeDisplay" class="text-sm px-4 py-[6px]" style="color:#cc781ecc; user-select:none; display:block; max-width:60vw; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">
                            No file loaded
                        </span>
                <div class="flex-1 flex items-center justify-center" style="position: absolute; top: 0; margin: 0 auto; width: calc(100% - 200px); left: 0; right: 0;">
                    
                    <div style="text-align:center; pointer-events:none;">
                        <span id="spectrogramStatus" class="text-sm px-2 py-1" style="color: #cc781e">â€”</span>
                
                        
                    </div>
                </div>
                <span id="waveformStatus" class="text-sm px-2 py-1" style="color: #cc781e">Status</span>
            </div>
            <script>
            console.log('waveform.html script loaded');
            </script>
    </section>
    <script src="static/waveform.js" type="module"></script>
</body>
</html>